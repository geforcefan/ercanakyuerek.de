<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Writing a Library in C++ and Using It in the Browser With the WASI SDK on Ercan Akyürek</title><link>https://ercanakyuerek.de/tags/writing-a-library-in-c++-and-using-it-in-the-browser-with-the-wasi-sdk/</link><description>Recent content in Writing a Library in C++ and Using It in the Browser With the WASI SDK on Ercan Akyürek</description><generator>Hugo</generator><language>en</language><lastBuildDate>Mon, 27 Feb 2023 17:45:00 +0100</lastBuildDate><atom:link href="https://ercanakyuerek.de/tags/writing-a-library-in-c++-and-using-it-in-the-browser-with-the-wasi-sdk/index.xml" rel="self" type="application/rss+xml"/><item><title>JavaScript module</title><link>https://ercanakyuerek.de/posts/wasi/wasi-sdk-writing-library-in-cpp-4/</link><pubDate>Mon, 27 Feb 2023 17:45:00 +0100</pubDate><guid>https://ercanakyuerek.de/posts/wasi/wasi-sdk-writing-library-in-cpp-4/</guid><description>&lt;p&gt;&lt;a href="https://ercanakyuerek.de/posts/wasi/wasi-sdk-writing-library-in-cpp-3/"&gt;If you haven&amp;rsquo;t read the third article of this series, I highly recommend that you do so.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This is the point where we will develop our &lt;code&gt;JavaScript&lt;/code&gt; library that utilizes the functions exposed in the &lt;code&gt;WebAssembly&lt;/code&gt; module. I have created a simple template for this purpose. You may notice that we are defining some imports for &lt;code&gt;WASI&lt;/code&gt;, but they are all empty. Allow me to explain what &lt;code&gt;WASI&lt;/code&gt; is and what it aims to achieve. &lt;code&gt;WASI&lt;/code&gt; is an attempt to create specifications similar to the &lt;code&gt;POSIX&lt;/code&gt; standard, which can be implemented across different runtimes, such as browsers or regular machines, and provides access to system-specific functions, such as file systems. However, for our library, which only needs to perform calculations, we do not require a complex runtime environment. This is why our functions are empty. Some may argue that we should use the Emscripten SDK instead of the &lt;code&gt;WASI SDK&lt;/code&gt;, but I believe that the &lt;code&gt;WASI SDK&lt;/code&gt; is the future. It produces smaller binaries and has fewer complications compared to &lt;code&gt;Emscripten&lt;/code&gt;. There are official efforts to import standard &lt;code&gt;WASI&lt;/code&gt; functions for the &lt;code&gt;browser&lt;/code&gt;, but unfortunately, they do not seem to work unless a &lt;code&gt;WebAssembly module&lt;/code&gt; is instantiated within a &lt;code&gt;worker&lt;/code&gt;. If there are any changes in the future regarding this matter, I will update my articles accordingly. &lt;a href="https://github.com/wasmerio/wasmer-js"&gt;Here&lt;/a&gt; is the mentioned attempt to bring a &lt;code&gt;WASI runtime&lt;/code&gt; to &lt;code&gt;browsers&lt;/code&gt;. If you can load a &lt;code&gt;WASM file&lt;/code&gt; outside the &lt;code&gt;worker&lt;/code&gt;, just email me your solution and I will include it here! &amp;#x1f604;&lt;/p&gt;</description></item><item><title>Implementing library functions</title><link>https://ercanakyuerek.de/posts/wasi/wasi-sdk-writing-library-in-cpp-3/</link><pubDate>Fri, 24 Feb 2023 00:19:00 +0100</pubDate><guid>https://ercanakyuerek.de/posts/wasi/wasi-sdk-writing-library-in-cpp-3/</guid><description>&lt;p&gt;&lt;a href="https://ercanakyuerek.de/posts/wasi/wasi-sdk-writing-library-in-cpp-2/"&gt;If you haven&amp;rsquo;t read the second article of this series, I highly recommend that you do so.&lt;/a&gt;&lt;/p&gt;








&lt;div class="embedded-iframe float-right"&gt;
 &lt;iframe
 src="https://ercanakyuerek.de//wasi-sdk-writing-library-in-cpp/spline.html"
 width="225px"
 height="225px"
 style="border: 0"
 class="iframe"
 &gt;&lt;/iframe&gt;

 
 &lt;div class="description" style="width: 225px"&gt;Transition from parameter-based non-uniform to uniform node spacing. The control points are draggable.&lt;/div&gt;
 
&lt;/div&gt;
&lt;p&gt;In this article, we&amp;rsquo;ll be exploring a more interesting example where we&amp;rsquo;ll construct a Bézier curve, evaluate nodes on it, and write a function that gives any position on the curve by a length parameter. To explain briefly, a Bézier curve is represented by a parameter &lt;code&gt;t&lt;/code&gt;, which varies between 0 and 1 and determines the position of nodes on the curve. However, this &lt;code&gt;t&lt;/code&gt; value doesn&amp;rsquo;t produce uniform spacing, which is problematic when we want to evaluate a point on the curve based on its distance. To solve this, we can evaluate some nodes along the curve with known distances and then linearly interpolate new nodes between them to find the point we&amp;rsquo;re looking for.&lt;/p&gt;</description></item><item><title>CMake and build scripts</title><link>https://ercanakyuerek.de/posts/wasi/wasi-sdk-writing-library-in-cpp-2/</link><pubDate>Thu, 23 Feb 2023 23:15:00 +0100</pubDate><guid>https://ercanakyuerek.de/posts/wasi/wasi-sdk-writing-library-in-cpp-2/</guid><description>&lt;p&gt;&lt;a href="https://ercanakyuerek.de/posts/wasi/wasi-sdk-writing-library-in-cpp-1/"&gt;If you haven&amp;rsquo;t read the first article of this series, I highly recommend that you do so.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;To simplify the building process, we can create a build script. We have already defined some scripts in our &lt;code&gt;package.json&lt;/code&gt; file. At this point, the &lt;code&gt;build-wasm.js&lt;/code&gt; file is still empty, so we can create a basic script that first deletes an existing &lt;code&gt;build&lt;/code&gt; folder, creates a new one, and runs &lt;code&gt;cmake ..&lt;/code&gt; inside it. We will be using a WASI-SDK docker image from &lt;code&gt;ghcr.io/webassembly/wasi-sdk&lt;/code&gt; to run cmake and eventually compile the project via &lt;code&gt;make&lt;/code&gt;.&lt;/p&gt;</description></item><item><title>Folder structure</title><link>https://ercanakyuerek.de/posts/wasi/wasi-sdk-writing-library-in-cpp-1/</link><pubDate>Thu, 23 Feb 2023 22:00:00 +0100</pubDate><guid>https://ercanakyuerek.de/posts/wasi/wasi-sdk-writing-library-in-cpp-1/</guid><description>&lt;p&gt;You may have already heard that it&amp;rsquo;s possible to write certain parts of your web application using languages like C++ or Rust and compile them into WebAssembly. WebAssembly is a binary format that allows code to be executed on the web and is designed to be efficient, secure, and portable. There are use cases where WebAssembly can be particularly beneficial, such as performing complex and resource-intensive computations for real-time applications or mathematical operations.&lt;/p&gt;</description></item></channel></rss>