<!doctype html><html lang=en><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content><meta name=description content="Right now, when we want to know the position and forward direction along a curve, we ask two separate functions. This works, but having two separate functions for the same node on the track is odd and adds more complexity than we actually need.
Earlier we mentioned that there is a better way to describe this kind of information. That better way is a 4x4 transformation matrix.
A transformation matrix can hold position and directions at the same time. This is exactly what we need to describe a node along the track. Once we switch to transformation matrices, the two existing functions forwardDirectionAtArcLength and positionAtArcLength naturally collapse into one. Instead of asking the track for separate pieces of data, we ask for a transformation matrix at a distance along the curve and extract whatever information we need from it.
"><meta name=keywords content="homepage,blog,writing a roller coaster simulation"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://ercanakyuerek.de/posts/writing-a-roller-coaster-simulation/transformation-matrix/><title>Transformation Matrix :: Ercan Akyürek</title><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css integrity="sha512-Cv93isQdFwaKBV+Z4X8kaVBYWHST58Xb/jVOcV9aRsGSArZsgAnFIhMpDoMDcFNoUtday1hdjn0nGp3+KZyyFw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=/main.c2d7d61a824ff773d404f743b12cb826e19cf26f3cdca0c7813abd20673bdb41.css integrity="sha256-wtfWGoJP93PUBPdDsSy4JuGc8m883KDHgTq9IGc720E="><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color><link rel="shortcut icon" href=/favicon.ico><meta name=msapplication-TileColor content><meta itemprop=name content="Transformation Matrix"><meta itemprop=description content="Right now, when we want to know the position and forward direction along a curve, we ask two separate functions. This works, but having two separate functions for the same node on the track is odd and adds more complexity than we actually need.
Earlier we mentioned that there is a better way to describe this kind of information. That better way is a 4x4 transformation matrix.
A transformation matrix can hold position and directions at the same time. This is exactly what we need to describe a node along the track. Once we switch to transformation matrices, the two existing functions forwardDirectionAtArcLength and positionAtArcLength naturally collapse into one. Instead of asking the track for separate pieces of data, we ask for a transformation matrix at a distance along the curve and extract whatever information we need from it."><meta itemprop=datePublished content="2025-12-21T13:30:00+01:00"><meta itemprop=dateModified content="2025-12-21T13:30:00+01:00"><meta itemprop=wordCount content="832"><meta itemprop=keywords content="Writing a Roller Coaster Simulation"><meta name=twitter:card content="summary"><meta name=twitter:title content="Transformation Matrix"><meta name=twitter:description content="Right now, when we want to know the position and forward direction along a curve, we ask two separate functions. This works, but having two separate functions for the same node on the track is odd and adds more complexity than we actually need.
Earlier we mentioned that there is a better way to describe this kind of information. That better way is a 4x4 transformation matrix.
A transformation matrix can hold position and directions at the same time. This is exactly what we need to describe a node along the track. Once we switch to transformation matrices, the two existing functions forwardDirectionAtArcLength and positionAtArcLength naturally collapse into one. Instead of asking the track for separate pieces of data, we ask for a transformation matrix at a distance along the curve and extract whatever information we need from it."><meta property="og:url" content="https://ercanakyuerek.de/posts/writing-a-roller-coaster-simulation/transformation-matrix/"><meta property="og:site_name" content="Ercan Akyürek"><meta property="og:title" content="Transformation Matrix"><meta property="og:description" content="Right now, when we want to know the position and forward direction along a curve, we ask two separate functions. This works, but having two separate functions for the same node on the track is odd and adds more complexity than we actually need.
Earlier we mentioned that there is a better way to describe this kind of information. That better way is a 4x4 transformation matrix.
A transformation matrix can hold position and directions at the same time. This is exactly what we need to describe a node along the track. Once we switch to transformation matrices, the two existing functions forwardDirectionAtArcLength and positionAtArcLength naturally collapse into one. Instead of asking the track for separate pieces of data, we ask for a transformation matrix at a distance along the curve and extract whatever information we need from it."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-12-21T13:30:00+01:00"><meta property="article:modified_time" content="2025-12-21T13:30:00+01:00"><meta property="article:tag" content="Writing a Roller Coaster Simulation"><meta property="article:published_time" content="2025-12-21 13:30:00 +0100 +0100"><script async src="https://www.googletagmanager.com/gtag/js?id=G-WCX2MRFT7Z"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WCX2MRFT7Z")}</script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js></script><script>MathJax={tex:{displayMath:[["\\[","\\]"],["$$","$$"]],inlineMath:[["\\(","\\)"]]},loader:{load:["ui/safe"]}}</script></head><body><div class=container><header class=header><span class=header__inner><a href=/ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>ercanakyuerek.de</span>
<span class=logo__cursor></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=/about>About me</a></li><li><a href=/posts>Posts</a></li></ul></nav><span class=menu-trigger><svg viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
4 minutes</p></div><article><h1 class=post-title><a href=https://ercanakyuerek.de/posts/writing-a-roller-coaster-simulation/transformation-matrix/>Transformation Matrix</a></h1><div class=post-content><p>Right now, when we want to know the <strong>position</strong> and <strong>forward
direction</strong> along a curve, we ask two separate functions. This works,
but having two separate functions for the same <strong>node</strong> on the track
is odd and adds more complexity than we actually need.</p><p>Earlier we mentioned that there is a better way to describe this kind
of information. That better way is a <strong>4x4 transformation matrix</strong>.</p><p>A transformation matrix can hold <strong>position</strong> and <strong>directions</strong> at
the same time. This is exactly what we need to describe a <strong>node</strong>
along the track. Once we switch to <strong>transformation matrices</strong>, the
two existing functions <code>forwardDirectionAtArcLength</code> and
<code>positionAtArcLength</code> naturally collapse into one. Instead of asking
the track for separate pieces of data, we ask for a <strong>transformation
matrix</strong> at a distance along the curve and extract whatever
information we need from it.</p><p>For that reason, we make a small but important change. From now on, we
work with <strong>tranformation matrices</strong> and remove those two functions
entirely.</p><p>If it helps, it is worth rereading the chapter on <a href=https://ercanakyuerek.de/posts/writing-a-roller-coaster-simulation/linear-track/>linear roller
coaster
tracks</a>,
where <code>forwardDirectionAtArcLength</code> and <code>positionAtArcLength</code> were
introduced. Both are now replaced by a single function called
<code>transformationAtArcLength</code>.</p><p>For a linear track segment, this is straightforward. We compute the
<strong>position</strong> exactly like before using linear interpolation. For
orientation, we let <strong>THREE.js</strong> build a matrix that <code>lookAt</code>s from
one control point to the other. This gives us a correct <strong>forward
direction</strong> without any extra work.</p><blockquote><p><strong>Note:</strong> At this stage, we only need a valid <strong>forward direction</strong>.
There is no need to complicate things with <strong>roll</strong>, so we ignore it
for now.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>transformationAtArcLength</span> <span style=color:#f92672>=</span> (
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cp1</span>: <span style=color:#66d9ef>Vector3</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cp2</span>: <span style=color:#66d9ef>Vector3</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>at</span>: <span style=color:#66d9ef>number</span>,
</span></span><span style=display:flex><span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>position</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cp1</span>
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>clone</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>lerp</span>(<span style=color:#a6e22e>cp2</span>, <span style=color:#a6e22e>at</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>totalArcLength</span>(<span style=color:#a6e22e>cp1</span>, <span style=color:#a6e22e>cp2</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Matrix4</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>lookAt</span>(<span style=color:#a6e22e>cp2</span>, <span style=color:#a6e22e>cp1</span>, <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Vector3</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>))
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>setPosition</span>(<span style=color:#a6e22e>position</span>);
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>With this change, we also need to adjust <code>evaluateMotion</code>. Instead of
receiving a <strong>forward direction</strong> vector, it now receives a
<strong>transformation matrix</strong>. We then extract the <strong>forward direction</strong>
from that transformation.</p><p>This is very straightforward. Here is a small helper to extract the
<strong>forward direction</strong> from a <strong>transformation matrix</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>toFrontDirection</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>m</span>: <span style=color:#66d9ef>Matrix4</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Vector3</span>(
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>m</span>.<span style=color:#a6e22e>elements</span>[<span style=color:#ae81ff>8</span>],
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>m</span>.<span style=color:#a6e22e>elements</span>[<span style=color:#ae81ff>9</span>],
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>m</span>.<span style=color:#a6e22e>elements</span>[<span style=color:#ae81ff>10</span>],
</span></span><span style=display:flex><span>  ).<span style=color:#a6e22e>normalize</span>();
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>Now we use this helper to extract the <strong>forward direction</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>forwardDirection</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>toFrontDirection</span>(<span style=color:#a6e22e>transformation</span>);
</span></span></code></pre></div><p>With that in place, the full updated <code>evaluateMotion</code> function looks
like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>evaluateMotion</span> <span style=color:#f92672>=</span> (
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>state</span>: <span style=color:#66d9ef>SimulationState</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>transformation</span>: <span style=color:#66d9ef>Matrix4</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>friction</span>: <span style=color:#66d9ef>number</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>airResistance</span>: <span style=color:#66d9ef>number</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>gravity</span>: <span style=color:#66d9ef>number</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>deltaTime</span>: <span style=color:#66d9ef>number</span>,
</span></span><span style=display:flex><span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>SimulationState</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>forwardDirection</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>toFrontDirection</span>(<span style=color:#a6e22e>transformation</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>velocityDirection</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>velocity</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>?</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>1</span> : <span style=color:#66d9ef>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>energyLoss</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>airResistance</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>velocity</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>velocity</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>energyLoss</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>friction</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>gravity</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>energyLoss</span> <span style=color:#f92672>*=</span> <span style=color:#a6e22e>velocityDirection</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>acceleration</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>forwardDirection</span>.<span style=color:#a6e22e>dot</span>(
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Vector3</span>(<span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>gravity</span>, <span style=color:#ae81ff>0</span>),
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>acceleration</span> <span style=color:#f92672>-=</span> <span style=color:#a6e22e>energyLoss</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>velocity</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>velocity</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>acceleration</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>deltaTime</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>distanceTraveled</span> <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>distanceTraveled</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>velocity</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>deltaTime</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> { <span style=color:#a6e22e>velocity</span>, <span style=color:#a6e22e>distanceTraveled</span>, <span style=color:#a6e22e>acceleration</span> };
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><h2 id=what-comes-next>What comes next?</h2><p>These changes are mostly structural. Visually, nothing changes yet.
Under the hood, however, the simulation now works entirely with
<strong>transformation matrices</strong>, which will make later changes easier.</p><p><a href=https://ercanakyuerek.de/posts/writing-a-roller-coaster-simulation/curve-nodes/>In the next
chapter</a>,
we move away from linear segments and introduce a more general way to
describe <strong>curves</strong>. That will require a new implementation of
<code>transformationAtArcLength</code>, but the rest of the simulation can stay
as it is.</p><p>This is the kind of refactor we want. We change how the track is
described without rewriting everything built on top of it.</p><h2 id=interactive-demo-and-code>Interactive demo and code</h2><p>There is no visible difference in the demo. The train behaves exactly
as before. The only change is that the simulation now uses
<code>transformationAtArcLength</code> internally.</p><p>For completeness, the full demo is shown below.</p><div class=embedded><iframe id=react-root-7ecd2d36c43806715a1e78cde7a79802 width=100% height=380px class=frame></iframe>
<script>document.getElementById("react-root-7ecd2d36c43806715a1e78cde7a79802").srcdoc=`
    <!DOCTYPE html>
    <html lang="en" data-theme="dark">
      <head>
          <base href="${location.origin}/">
      </head>
        <body class="content-component">
        <div id="root" class="full-screen"></div>
        <script type="module">
          import { renderContentComponentByPath } from '/scripts/render-content-component.js';
          renderContentComponentByPath('root', './posts/writing-a-roller-coaster-simulation/transformation-matrix/TransformationMatrixDemoScene.tsx');
        <\/script>
      </body>
    </html>
  `</script></div><p>If you want to run the code locally, clone this
<a href=https://github.com/geforcefan/ercanakyuerek.de target=_blank>repository</a>,
run <code>npm install</code> and <code>npm run dev-scripts</code>,
then open this
<a href=http://localhost:3000/src/content/posts/writing-a-roller-coaster-simulation/transformation-matrix/TransformationMatrixDemoScene.tsx target=_blank>link</a>
in your browser.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span>, { <span style=color:#a6e22e>useEffect</span>, <span style=color:#a6e22e>useState</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;react&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Line</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@react-three/drei&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useFrame</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@react-three/fiber&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>MathUtils</span>, <span style=color:#a6e22e>Vector3</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;three&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>totalArcLength</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>transformationAtArcLength</span>,
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;../../../../maths/linear&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>evaluateMotion</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;../../../../helper/physics&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useColors</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;../../../../hooks/useColors&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useSimulationStateControls</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;../../../../hooks/useSimulationStateControls&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>DragControlPoints</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;../../../../components/curve/DragControlPoints&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>PointWithMatrixArrows</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;../../../../components/PointWithMatrixArrows&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>OrthographicScene</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;../../../../components/scenes/OrthographicScene&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>TransformationMatrixDemo</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>colors</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useColors</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// control points
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>points</span>, <span style=color:#a6e22e>setPoints</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>([
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Vector3</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>11.5</span>, <span style=color:#ae81ff>3.2</span>, <span style=color:#ae81ff>0</span>),
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Vector3</span>(<span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>2.8</span>, <span style=color:#ae81ff>0</span>),
</span></span><span style=display:flex><span>  ]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>simulationState</span>, <span style=color:#a6e22e>setSimulationState</span>] <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>useSimulationStateControls</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>useFrame</span>((<span style=color:#a6e22e>state</span>, <span style=color:#a6e22e>deltaTime</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setSimulationState</span>(
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>evaluateMotion</span>(
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>simulationState</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>transformationAtArcLength</span>(
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>points</span>[<span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>points</span>[<span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>simulationState</span>.<span style=color:#a6e22e>distanceTraveled</span>,
</span></span><span style=display:flex><span>        ),
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>simulationState</span>.<span style=color:#a6e22e>friction</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>simulationState</span>.<span style=color:#a6e22e>airResistance</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>simulationState</span>.<span style=color:#a6e22e>gravity</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>deltaTime</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>simulationState</span>.<span style=color:#a6e22e>simulationSpeed</span>,
</span></span><span style=display:flex><span>      ),
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// reset simulation state if train overshoots track
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>useEffect</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>simulationState</span>.<span style=color:#a6e22e>distanceTraveled</span> <span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>totalArcLength</span>(<span style=color:#a6e22e>points</span>[<span style=color:#ae81ff>0</span>], <span style=color:#a6e22e>points</span>[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>||</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>simulationState</span>.<span style=color:#a6e22e>distanceTraveled</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    ) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>setSimulationState</span>({
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>velocity</span>: <span style=color:#66d9ef>0</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>distanceTraveled</span>: <span style=color:#66d9ef>0</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>acceleration</span>: <span style=color:#66d9ef>0</span>,
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }, [<span style=color:#a6e22e>simulationState</span>.<span style=color:#a6e22e>distanceTraveled</span>, <span style=color:#a6e22e>points</span>, <span style=color:#a6e22e>setSimulationState</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>motionMatrix</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>transformationAtArcLength</span>(
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>points</span>[<span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>points</span>[<span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MathUtils</span>.<span style=color:#a6e22e>clamp</span>(
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>simulationState</span>.<span style=color:#a6e22e>distanceTraveled</span>,
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>totalArcLength</span>(<span style=color:#a6e22e>points</span>[<span style=color:#ae81ff>0</span>], <span style=color:#a6e22e>points</span>[<span style=color:#ae81ff>1</span>]),
</span></span><span style=display:flex><span>    ),
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    &lt;&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>DragControlPoints</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>axisLock</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;z&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>points</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>points</span>}
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>setPoints</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>setPoints</span>}
</span></span><span style=display:flex><span>      /&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>Line</span> <span style=color:#a6e22e>points</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>points</span>} <span style=color:#a6e22e>color</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>colors</span>.<span style=color:#a6e22e>secondary</span>} /&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>PointWithMatrixArrows</span> <span style=color:#a6e22e>matrix</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>motionMatrix</span>} /&gt;
</span></span><span style=display:flex><span>    &lt;/&gt;
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>TransformationMatrixDemoScene</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>OrthographicScene</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>TransformationMatrixDemo</span> /&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>OrthographicScene</span>&gt;
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span></code></pre></div></div></article><hr><div class=post-info><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg>
<span class=tag><a href=https://ercanakyuerek.de/tags/writing-a-roller-coaster-simulation/>writing a roller coaster simulation</a></span></p><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
832 Words</p><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
2025-12-21 12:30</p></div><hr><div class=sharing-buttons><a class=resp-sharing-button__link href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fercanakyuerek.de%2fposts%2fwriting-a-roller-coaster-simulation%2ftransformation-matrix%2f" target=_blank rel=noopener aria-label title="Share on facebook"><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://twitter.com/intent/tweet/?url=https%3a%2f%2fercanakyuerek.de%2fposts%2fwriting-a-roller-coaster-simulation%2ftransformation-matrix%2f" target=_blank rel=noopener aria-label title="Share on twitter"><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://www.tumblr.com/widgets/share/tool?posttype=link&amp;title=Transformation%20Matrix&amp;caption=Transformation%20Matrix&amp;canonicalUrl=https%3a%2f%2fercanakyuerek.de%2fposts%2fwriting-a-roller-coaster-simulation%2ftransformation-matrix%2f" target=_blank rel=noopener aria-label title="Share on tumblr"><div class="resp-sharing-button resp-sharing-button--tumblr resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.563 24c-5.093.0-7.031-3.756-7.031-6.411V9.747H5.116V6.648c3.63-1.313 4.512-4.596 4.71-6.469C9.84.051 9.941.0 9.999.0h3.517v6.114h4.801v3.633h-4.82v7.47c.016 1.001.375 2.371 2.207 2.371h.09c.631-.02 1.486-.205 1.936-.419l1.156 3.425c-.436.636-2.4 1.374-4.156 1.404h-.178l.011.002z"/></svg></div></div></a><a class=resp-sharing-button__link href="mailto:?subject=Transformation%20Matrix&amp;body=https%3a%2f%2fercanakyuerek.de%2fposts%2fwriting-a-roller-coaster-simulation%2ftransformation-matrix%2f" target=_self rel=noopener aria-label title="Share via email"><div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></div></div></a><a class=resp-sharing-button__link href="https://pinterest.com/pin/create/button/?url=https%3a%2f%2fercanakyuerek.de%2fposts%2fwriting-a-roller-coaster-simulation%2ftransformation-matrix%2f&amp;media=https%3a%2f%2fercanakyuerek.de%2fposts%2fwriting-a-roller-coaster-simulation%2ftransformation-matrix%2f;description=Transformation%20Matrix" target=_blank rel=noopener aria-label title="Share on pinterest"><div class="resp-sharing-button resp-sharing-button--pinterest resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M12.017.0C5.396.0.029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.162-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024.0 1.518.769 1.518 1.688.0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128.0 3.768-2.245 3.768-5.487.0-2.861-2.063-4.869-5.008-4.869-3.41.0-5.409 2.562-5.409 5.199.0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.401.165-1.495-.69-2.433-2.878-2.433-4.646.0-3.776 2.748-7.252 7.92-7.252 4.158.0 7.392 2.967 7.392 6.923.0 4.135-2.607 7.462-6.233 7.462-1.214.0-2.354-.629-2.758-1.379l-.749 2.848c-.269 1.045-1.004 2.352-1.498 3.146 1.123.345 2.306.535 3.55.535 6.607.0 11.985-5.365 11.985-11.987C23.97 5.39 18.592.026 11.985.026L12.017.0z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fercanakyuerek.de%2fposts%2fwriting-a-roller-coaster-simulation%2ftransformation-matrix%2f&amp;title=Transformation%20Matrix&amp;summary=Transformation%20Matrix&amp;source=https%3a%2f%2fercanakyuerek.de%2fposts%2fwriting-a-roller-coaster-simulation%2ftransformation-matrix%2f" target=_blank rel=noopener aria-label title="Share on linkedin"><div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></div></div></a><a class=resp-sharing-button__link href="https://reddit.com/submit/?url=https%3a%2f%2fercanakyuerek.de%2fposts%2fwriting-a-roller-coaster-simulation%2ftransformation-matrix%2f&amp;resubmit=true&amp;title=Transformation%20Matrix" target=_blank rel=noopener aria-label title="Share on reddit"><div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M12 0A12 12 0 000 12a12 12 0 0012 12 12 12 0 0012-12A12 12 0 0012 0zm5.01 4.744c.688.0 1.25.561 1.25 1.249a1.25 1.25.0 01-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968.0 1.754.786 1.754 1.754.0.716-.435 1.333-1.01 1.614a3.111 3.111.0 01.042.52c0 2.694-3.13 4.87-7.004 4.87s-7.004-2.176-7.004-4.87c0-.183.015-.366.043-.534A1.748 1.748.0 014.028 12c0-.968.786-1.754 1.754-1.754.463.0.898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342.0 01.14-.197.35.35.0 01.238-.042l2.906.617a1.214 1.214.0 011.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687.0 1.248-.561 1.248-1.249S9.937 12 9.249 12zm5.5.0c-.687.0-1.248.561-1.248 1.25.0.687.561 1.248 1.249 1.248S16 13.937 16 13.249c0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327.0 00-.231.094.33.33.0 000 .463c.842.842 2.484.913 2.961.913s2.105-.056 2.961-.913a.361.361.0 00.029-.463.33.33.0 00-.464.0c-.547.533-1.684.73-2.512.73-.828.0-1.979-.196-2.512-.73a.326.326.0 00-.232-.095z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://www.xing.com/app/user?op=share;url=https%3a%2f%2fercanakyuerek.de%2fposts%2fwriting-a-roller-coaster-simulation%2ftransformation-matrix%2f;title=Transformation%20Matrix" target=_blank rel=noopener aria-label title="Share on xing"><div class="resp-sharing-button resp-sharing-button--xing resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M18.188.0c-.517.0-.741.325-.927.66.0.0-7.455 13.224-7.702 13.657.015.024 4.919 9.023 4.919 9.023.17.308.436.66.967.66h3.454c.211.0.375-.078.463-.22.089-.151.089-.346-.009-.536l-4.879-8.916c-.004-.006-.004-.016.0-.022L22.139.756c.095-.191.097-.387.006-.535C22.056.078 21.894.0 21.686.0h-3.498zM3.648 4.74c-.211.0-.385.074-.473.216-.09.149-.078.339.02.531l2.34 4.05c.004.01.004.016.0.021L1.86 16.051c-.099.188-.093.381.0.529.085.142.239.234.45.234h3.461c.518.0.766-.348.945-.667l3.734-6.609-2.378-4.155c-.172-.315-.434-.659-.962-.659H3.648v.016z"/></svg></div></div></a><a class=resp-sharing-button__link href="whatsapp://send?text=Transformation%20Matrix%20https%3a%2f%2fercanakyuerek.de%2fposts%2fwriting-a-roller-coaster-simulation%2ftransformation-matrix%2f" target=_blank rel=noopener aria-label title="Share on whatsapp"><div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198.0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479.0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87.0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86.0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64.0 5.122 1.03 6.988 2.898a9.825 9.825.0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815.0 0012.05.0C5.495.0.16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882.0 005.683 1.448h.005c6.554.0 11.89-5.335 11.893-11.893a11.821 11.821.0 00-3.48-8.413z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fercanakyuerek.de%2fposts%2fwriting-a-roller-coaster-simulation%2ftransformation-matrix%2f&amp;t=Transformation%20Matrix" target=_blank rel=noopener aria-label title="Share on hacker news"><div class="resp-sharing-button resp-sharing-button--hackernews resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M0 24V0h24v24H0zM6.951 5.896l4.112 7.708v5.064h1.583v-4.972l4.148-7.799h-1.749l-2.457 4.875c-.372.745-.688 1.434-.688 1.434s-.297-.708-.651-1.434L8.831 5.896h-1.88z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://telegram.me/share/url?text=Transformation%20Matrix&amp;url=https%3a%2f%2fercanakyuerek.de%2fposts%2fwriting-a-roller-coaster-simulation%2ftransformation-matrix%2f" target=_blank rel=noopener aria-label title="Share on telegram"><div class="resp-sharing-button resp-sharing-button--telegram resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg></div></div></a></div><div class=pagination><div class=pagination__buttons><span class="button previous"><a href=https://ercanakyuerek.de/posts/writing-a-roller-coaster-simulation/friction-and-air-resistance/><span class=button__icon>←</span>
<span class=button__text>Friction and Air Resistance</span>
</a></span><span class="button next"><a href=https://ercanakyuerek.de/posts/writing-a-roller-coaster-simulation/curve-nodes/><span class=button__text>Curve Nodes</span>
<span class=button__icon>→</span></a></span></div></div></main></div><footer class=footer></footer></div><script type=text/javascript src=/bundle.min.257531934bfbdf8527f52eab4b38eb8211337125b54dae74132499837c006508dae0d544e859d909af1be266d147861c1c1e688de0f7d2cc2f258de78a9b8a6a.js integrity="sha512-JXUxk0v734Un9S6rSzjrghEzcSW1Ta50EySZg3wAZQja4NVE6FnZCa8b4mbRR4YcHB5ojeD30swvJY3nipuKag=="></script></body></html>