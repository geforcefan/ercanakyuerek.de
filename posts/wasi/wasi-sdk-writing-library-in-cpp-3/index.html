<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content><meta name=description content="If you haven&amp;rsquo;t read the second article of this series, I highly recommend that you do so.
In this article, we&amp;rsquo;ll be exploring a more interesting example where we&amp;rsquo;ll construct a bezier curve, evaluate nodes on it, and write a function that gives any position on the curve by a length parameter. To explain briefly, a bezier curve is represented by a parameter t, which varies between 0 and 1 and determines the position of nodes on the curve."><meta name=keywords content="homepage,blog"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://ercanakyuerek.de/posts/wasi/wasi-sdk-writing-library-in-cpp-3/><title>Writing a Library in C++ and Using it in the Browser with the WASI SDK - Implementing library functions :: Ercan Akyürek</title><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css integrity="sha512-Cv93isQdFwaKBV+Z4X8kaVBYWHST58Xb/jVOcV9aRsGSArZsgAnFIhMpDoMDcFNoUtday1hdjn0nGp3+KZyyFw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=/main.084e1f38e56f02e8414204a54ff447900d34f57944c839fbefc7cdc475841863.css integrity="sha256-CE4fOOVvAuhBQgSlT/RHkA009XlEyDn778fNxHWEGGM="><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color><link rel="shortcut icon" href=/favicon.ico><meta name=msapplication-TileColor content><meta itemprop=name content="Writing a Library in C++ and Using it in the Browser with the WASI SDK - Implementing library functions"><meta itemprop=description content="If you haven&rsquo;t read the second article of this series, I highly recommend that you do so.
In this article, we&rsquo;ll be exploring a more interesting example where we&rsquo;ll construct a bezier curve, evaluate nodes on it, and write a function that gives any position on the curve by a length parameter. To explain briefly, a bezier curve is represented by a parameter t, which varies between 0 and 1 and determines the position of nodes on the curve."><meta itemprop=datePublished content="2023-02-24T00:19:00+01:00"><meta itemprop=dateModified content="2023-02-24T00:19:00+01:00"><meta itemprop=wordCount content="1410"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Writing a Library in C++ and Using it in the Browser with the WASI SDK - Implementing library functions"><meta name=twitter:description content="If you haven&rsquo;t read the second article of this series, I highly recommend that you do so.
In this article, we&rsquo;ll be exploring a more interesting example where we&rsquo;ll construct a bezier curve, evaluate nodes on it, and write a function that gives any position on the curve by a length parameter. To explain briefly, a bezier curve is represented by a parameter t, which varies between 0 and 1 and determines the position of nodes on the curve."><meta property="og:title" content="Writing a Library in C++ and Using it in the Browser with the WASI SDK - Implementing library functions"><meta property="og:description" content="If you haven&rsquo;t read the second article of this series, I highly recommend that you do so.
In this article, we&rsquo;ll be exploring a more interesting example where we&rsquo;ll construct a bezier curve, evaluate nodes on it, and write a function that gives any position on the curve by a length parameter. To explain briefly, a bezier curve is represented by a parameter t, which varies between 0 and 1 and determines the position of nodes on the curve."><meta property="og:type" content="article"><meta property="og:url" content="https://ercanakyuerek.de/posts/wasi/wasi-sdk-writing-library-in-cpp-3/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-24T00:19:00+01:00"><meta property="article:modified_time" content="2023-02-24T00:19:00+01:00"><meta property="og:site_name" content="Ercan Akyürek"><meta property="article:published_time" content="2023-02-24 00:19:00 +0100 +0100"><script async src="https://www.googletagmanager.com/gtag/js?id=G-WCX2MRFT7Z"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WCX2MRFT7Z",{anonymize_ip:!1})}</script></head><body><div class=container><header class=header><span class=header__inner><a href=/ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>ercanakyuerek.de</span>
<span class=logo__cursor></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=/about>About me</a></li><li><a href=/posts>Blog</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>7 minutes</p></div><article><h1 class=post-title><a href=https://ercanakyuerek.de/posts/wasi/wasi-sdk-writing-library-in-cpp-3/>Writing a Library in C++ and Using it in the Browser with the WASI SDK - Implementing library functions</a></h1><div class=post-content><p><a href=https://ercanakyuerek.de/posts/wasi/wasi-sdk-writing-library-in-cpp-2/>If you haven&rsquo;t read the second article of this series, I highly recommend that you do so.</a></p><iframe src=https://ercanakyuerek.de/wasi-sdk-writing-library-in-cpp/spline.html class=embedded-iframe></iframe><p>In this article, we&rsquo;ll be exploring a more interesting example where we&rsquo;ll construct a bezier curve, evaluate nodes on it, and write a function that gives any position on the curve by a length parameter. To explain briefly, a bezier curve is represented by a parameter <code>t</code>, which varies between 0 and 1 and determines the position of nodes on the curve. However, this <code>t</code> value doesn&rsquo;t produce uniform spacing, which is problematic when we want to evaluate a point on the curve based on its distance. To solve this, we can evaluate some nodes along the curve with known distances and then linearly interpolate new nodes between them to find the point we&rsquo;re looking for.</p><p>While this is a specific example, it involves &ldquo;complex&rdquo; types such as custom structs and 3D vectors that will need to be accessed from a web browser. So it should serve as a useful case for testing our library 😄</p><h2 id=adding-a-third-party-library>Adding a third party library</h2><p>I mentioned 3D vectors, so there is a well-known library called <code>glm</code>. I know that this is an overkill library for our &ldquo;simple&rdquo; problem, but it serves the purpose of showing how to add other libraries to our project. Ideally, the 3rd party library also has a CMake ecosystem. Otherwise, we need to be creative, fortunately. <code>glm</code> provides CMake files. My approach is to add a git submodule into the root directory by calling:</p><pre tabindex=0><code>git submodule add https://github.com/g-truc/glm.git
</code></pre><p>We must include the glm directory as an include in our root <code>CMakeList.txt</code>, as the glm library is a header-only library and does not need to be linked against anything:</p><pre tabindex=0><code>include_directories(glm)
</code></pre><h2 id=spline-implementation>Spline implementation</h2><p>In summary, I have developed a solution for the problem discussed earlier, but I won&rsquo;t delve too deeply into the technical details. The primary function of my implementation, <code>bezier_fast</code>, computes the position on a bezier curve based on a given <code>t</code> parameter. Additionally, <code>estimate_length</code> is used to calculate the curve&rsquo;s length very quickly with a <code>low step size</code>. This estimation is necessary to determine how many nodes we should evaluate. With this method, we can create densely populated nodes depending on the curve&rsquo;s length. The evaluate function executes the procedure I just described. Naturally, we can always measure the distance between the evaluated position and the previous one to obtain the curve&rsquo;s total length, which we simply pass through the <code>get_length</code> function. Lastly, <code>get_position_at_distance</code> searches for the minimum node at a specified distance and linearly interpolates the position to the next node. We have successfully achieved the ability to evaluate uniformly spaced points on the curve.</p><p><code>src/spline.cc:</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&#34;spline.h&#34;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;glm/geometric.hpp&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> spline<span style=color:#f92672>::</span>evaluate() {
</span></span><span style=display:flex><span>    nodes.clear();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> numberOfNodes <span style=color:#f92672>=</span> (<span style=color:#66d9ef>int</span>)(estimate_length() <span style=color:#f92672>*</span> <span style=color:#ae81ff>20.0f</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#f92672>!</span>numberOfNodes) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    glm<span style=color:#f92672>::</span>vec3 lastPos <span style=color:#f92672>=</span> cp1;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> i<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> numberOfNodes; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> t <span style=color:#f92672>=</span> (<span style=color:#66d9ef>float</span>) i <span style=color:#f92672>/</span> (<span style=color:#66d9ef>float</span>) (numberOfNodes <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        glm<span style=color:#f92672>::</span>vec3 position <span style=color:#f92672>=</span> bezier_fast(cp1, cp2, cp3, cp4, t);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> distance <span style=color:#f92672>=</span> glm<span style=color:#f92672>::</span>distance(position, lastPos);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        nodes.push_back({
</span></span><span style=display:flex><span>            .position <span style=color:#f92672>=</span> position,
</span></span><span style=display:flex><span>            .distance <span style=color:#f92672>=</span> distance
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        lastPos <span style=color:#f92672>=</span> position;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>glm<span style=color:#f92672>::</span>vec3 spline<span style=color:#f92672>::</span>bezier_fast(glm<span style=color:#f92672>::</span>vec3 p0, glm<span style=color:#f92672>::</span>vec3 p1, glm<span style=color:#f92672>::</span>vec3 p2, glm<span style=color:#f92672>::</span>vec3 p3, <span style=color:#66d9ef>float</span> t) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> t1 <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.0f</span><span style=color:#f92672>-</span>t;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> b0 <span style=color:#f92672>=</span> t1 <span style=color:#f92672>*</span> t1 <span style=color:#f92672>*</span> t1;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> b1 <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>*</span> t1 <span style=color:#f92672>*</span> t1 <span style=color:#f92672>*</span> t;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> b2 <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>*</span> t1 <span style=color:#f92672>*</span> t <span style=color:#f92672>*</span> t;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> b3 <span style=color:#f92672>=</span> t <span style=color:#f92672>*</span> t <span style=color:#f92672>*</span> t;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> b0 <span style=color:#f92672>*</span> p0  <span style=color:#f92672>+</span> b1 <span style=color:#f92672>*</span> p1 <span style=color:#f92672>+</span> b2 <span style=color:#f92672>*</span> p2 <span style=color:#f92672>+</span> b3 <span style=color:#f92672>*</span> p3;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>float</span> spline<span style=color:#f92672>::</span>estimate_length() {
</span></span><span style=display:flex><span>    glm<span style=color:#f92672>::</span>vec3 lastPos <span style=color:#f92672>=</span> cp1;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> length <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0f</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> i<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>15</span>; i<span style=color:#f92672>+=</span> <span style=color:#ae81ff>2</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span> t <span style=color:#f92672>=</span> (<span style=color:#66d9ef>float</span>) (i) <span style=color:#f92672>/</span> <span style=color:#ae81ff>14.0f</span>;
</span></span><span style=display:flex><span>        glm<span style=color:#f92672>::</span>vec3 pos <span style=color:#f92672>=</span> bezier_fast(cp1, cp2, cp3, cp4, t);
</span></span><span style=display:flex><span>        length <span style=color:#f92672>+=</span> glm<span style=color:#f92672>::</span>distance(pos, lastPos);
</span></span><span style=display:flex><span>        lastPos <span style=color:#f92672>=</span> pos;
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> length;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>glm<span style=color:#f92672>::</span>vec3 spline<span style=color:#f92672>::</span>get_position_at_distance(<span style=color:#66d9ef>float</span> distance) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (nodes.size() <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>2</span>) <span style=color:#66d9ef>return</span> glm<span style=color:#f92672>::</span>vec3(<span style=color:#ae81ff>0.0f</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>auto</span> nextNode <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>lower_bound(nodes.begin(), nodes.end(), distance, [](<span style=color:#66d9ef>auto</span> a, <span style=color:#66d9ef>double</span> value) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>bool</span> { <span style=color:#66d9ef>return</span> a.distance <span style=color:#f92672>&lt;</span> value; });
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>auto</span> currentNode <span style=color:#f92672>=</span> nextNode <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>auto</span> isFirst <span style=color:#f92672>=</span> nextNode <span style=color:#f92672>==</span> nodes.begin();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>auto</span> isLast <span style=color:#f92672>=</span> currentNode <span style=color:#f92672>==</span> nodes.end();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (isFirst) <span style=color:#66d9ef>return</span> nodes[<span style=color:#ae81ff>0</span>].position;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (isLast) <span style=color:#66d9ef>return</span> nodes[nodes.size() <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>].position;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> t <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (nextNode<span style=color:#f92672>-&gt;</span>distance <span style=color:#f92672>-</span> currentNode<span style=color:#f92672>-&gt;</span>distance <span style=color:#f92672>&gt;</span> std<span style=color:#f92672>::</span>numeric_limits<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>double</span><span style=color:#f92672>&gt;::</span>epsilon()) {
</span></span><span style=display:flex><span>        t <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>max(std<span style=color:#f92672>::</span>min((distance <span style=color:#f92672>-</span> currentNode<span style=color:#f92672>-&gt;</span>distance) <span style=color:#f92672>/</span> (nextNode<span style=color:#f92672>-&gt;</span>distance <span style=color:#f92672>-</span> currentNode<span style=color:#f92672>-&gt;</span>distance), <span style=color:#ae81ff>1.0f</span>), <span style=color:#ae81ff>0.0f</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> glm<span style=color:#f92672>::</span>mix(currentNode<span style=color:#f92672>-&gt;</span>position, nextNode<span style=color:#f92672>-&gt;</span>position, t);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>float</span> spline<span style=color:#f92672>::</span>get_length() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#f92672>!</span>nodes.empty()) <span style=color:#66d9ef>return</span> nodes[nodes.size() <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>].distance;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><code>src/spline.h:</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#ifndef LIBCALCULATION_SPLINE_H
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define LIBCALCULATION_SPLINE_H
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;glm/vec3.hpp&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;vector&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>node</span> {
</span></span><span style=display:flex><span>    glm<span style=color:#f92672>::</span>vec3 position;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> distance;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>spline</span> {
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    spline(<span style=color:#66d9ef>const</span> glm<span style=color:#f92672>::</span>vec3 <span style=color:#f92672>&amp;</span>cp1, <span style=color:#66d9ef>const</span> glm<span style=color:#f92672>::</span>vec3 <span style=color:#f92672>&amp;</span>cp2, <span style=color:#66d9ef>const</span> glm<span style=color:#f92672>::</span>vec3 <span style=color:#f92672>&amp;</span>cp3, <span style=color:#66d9ef>const</span> glm<span style=color:#f92672>::</span>vec3 <span style=color:#f92672>&amp;</span>cp4) <span style=color:#f92672>:</span> cp1(cp1), cp2(cp2),
</span></span><span style=display:flex><span>                                                                                                     cp3(cp3),
</span></span><span style=display:flex><span>                                                                                                     cp4(cp4) {
</span></span><span style=display:flex><span>        evaluate();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    glm<span style=color:#f92672>::</span>vec3 get_position_at_distance(<span style=color:#66d9ef>float</span> distance);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>get_length</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    glm<span style=color:#f92672>::</span>vec3 cp1, cp2, cp3, cp4;
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>vector<span style=color:#f92672>&lt;</span>node<span style=color:#f92672>&gt;</span> nodes;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> glm<span style=color:#f92672>::</span>vec3 bezier_fast(glm<span style=color:#f92672>::</span>vec3 p0, glm<span style=color:#f92672>::</span>vec3 p1, glm<span style=color:#f92672>::</span>vec3 p2, glm<span style=color:#f92672>::</span>vec3 p3, <span style=color:#66d9ef>float</span> t);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>estimate_length</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>evaluate</span>();
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#endif </span><span style=color:#75715e>//LIBCALCULATION_SPLINE_H
</span></span></span></code></pre></div><h2 id=gluing-the-pieces-of-our-library>Gluing the Pieces of our library</h2><p>We still cannot use the functions yet, so we need to create glue code to expose them to the outside world. Our goal is to use this spline library in our browser, for example, to draw a uniformly spaced Bezier curve. We will expose three functions: <code>createSpline</code>, <code>getSplineLength</code>, and <code>getSplinePositionAtDistance</code>. Some of these functions return complex types, such as a <code>3D vector</code>, which we will handle on the JavaScript side. There are many techniques to pass complex data from and to our WebAssembly module, which we will discuss in detail later. For now, let&rsquo;s focus on creating some glue code in <code>glue/glue.cc</code>.</p><h3 id=data-types>Data types</h3><p>As mentioned several times before, passing complex data types in and out can be challenging, but it can be managed. Passing 32 and 64 bit integers and decimal numbers is natively supported, so there is no need to worry about those. However, passing types such as a <code>3D vector</code> is a different matter. We need to allocate memory on the JavaScript side, assign the <code>3D vector</code> data (3x <code>floats</code>) to a free memory space, and pass the location (pointer) to the function calls. If we return complex data from the WebAssembly module, we will get a pointer and access the data in memory and &ldquo;demangle&rdquo; it (for example, using <code>Float64Array</code> with the pointer as offset and length of 3 to access x, y, z data). We will delve deeper into this later.</p><h3 id=createspline-function>createSpline function</h3><p>This is a straightforward process. We replicate the original constructor and expose this new function using the <code>attribute((export_name("createSpline")))</code> attribute to make it available to the outside world. As shown, we return a pointer, which will be a number on the JavaScript side and can be used to access memory data later. To ensure that we can access the data of the 3d vector in memory on the JavaScript side, it is crucial that the parameters of the vector are also pointers. This is because we allocate memory on the JavaScript side and assign our vector data to that memory location.:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>__attribute__((export_name(<span style=color:#e6db74>&#34;createSpline&#34;</span>)))
</span></span><span style=display:flex><span>spline <span style=color:#f92672>*</span>createSpline(glm<span style=color:#f92672>::</span>vec3 <span style=color:#f92672>*</span>cp1, glm<span style=color:#f92672>::</span>vec3 <span style=color:#f92672>*</span>cp2, glm<span style=color:#f92672>::</span>vec3 <span style=color:#f92672>*</span>cp3, glm<span style=color:#f92672>::</span>vec3 <span style=color:#f92672>*</span>cp4) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>spline</span>(<span style=color:#f92672>*</span>cp1, <span style=color:#f92672>*</span>cp2, <span style=color:#f92672>*</span>cp3, <span style=color:#f92672>*</span>cp4);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=getsplinelength-function>getSplineLength function</h3><p>This function returns a <code>float</code>, so no need to handle any extra complex data stuff on the JavaScript side:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>__attribute__((export_name(<span style=color:#e6db74>&#34;getSplineLength&#34;</span>)))
</span></span><span style=display:flex><span><span style=color:#66d9ef>float</span> getSplineLength(spline <span style=color:#f92672>*</span>s) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> s<span style=color:#f92672>-&gt;</span>get_length();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=getsplinepositionatdistance-function>getSplinePositionAtDistance function</h3><p>This function returns a pointer to a <code>3d vector</code>, which allows us to access its data in memory on the <code>JavaScript</code> side. Therefore, we need to allocate a new space for the returned <code>3d vector</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>__attribute__((export_name(<span style=color:#e6db74>&#34;getSplinePositionAtDistance&#34;</span>)))
</span></span><span style=display:flex><span>glm<span style=color:#f92672>::</span>vec3 <span style=color:#f92672>*</span>getSplinePositionAtDistance(spline <span style=color:#f92672>*</span>s, <span style=color:#66d9ef>float</span> distance) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> glm<span style=color:#f92672>::</span>vec3(s<span style=color:#f92672>-&gt;</span>get_position_at_distance(distance));
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=malloc>malloc</h3><p>I understand that this may not be the most optimal approach for memory allocation, but it is currently working for my purposes. I may consider revising my implementation at a later time, but for now, we can utilize the <code>malloc</code> function from the <code>JavaScript</code> side. This is necessary for allocating memory to data that we want to pass to the <code>WebAssembly</code> functions, such as <code>3D vectors</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>__attribute__((export_name(<span style=color:#e6db74>&#34;malloc&#34;</span>)))
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#f92672>*</span>allocateMemory(size_t size) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>malloc</span>(size);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=build>Build</h2><p>At this point, you can run a build by executing <code>npm run build</code>. It should compile without any errors. In the next section, we will create a small <code>JavaScript</code> module that initializes the <code>WebAssembly</code> module, wraps the exposed functions, and handles incoming and outgoing data types. This <code>JavaScript</code> module can be used in your project just like any other <code>ES6 module</code>.</p><p><a href=https://ercanakyuerek.de/posts/wasi/wasi-sdk-writing-library-in-cpp-4/>Now, let&rsquo;s create a small JavaScript module that will be responsible for creating a WebAssembly module, loading our Wasm file, defining some imports for WASI (which will mostly be empty), and creating functions for those that we exported in our C++ glue code.</a></p></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>1410 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2023-02-23 23:19</p></div><hr><div class=sharing-buttons><a class=resp-sharing-button__link href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fercanakyuerek.de%2fposts%2fwasi%2fwasi-sdk-writing-library-in-cpp-3%2f" target=_blank rel=noopener aria-label title="Share on facebook"><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://twitter.com/intent/tweet/?url=https%3a%2f%2fercanakyuerek.de%2fposts%2fwasi%2fwasi-sdk-writing-library-in-cpp-3%2f" target=_blank rel=noopener aria-label title="Share on twitter"><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://www.tumblr.com/widgets/share/tool?posttype=link&title=Writing%20a%20Library%20in%20C%2b%2b%20and%20Using%20it%20in%20the%20Browser%20with%20the%20WASI%20SDK%20-%20Implementing%20library%20functions&caption=Writing%20a%20Library%20in%20C%2b%2b%20and%20Using%20it%20in%20the%20Browser%20with%20the%20WASI%20SDK%20-%20Implementing%20library%20functions&canonicalUrl=https%3a%2f%2fercanakyuerek.de%2fposts%2fwasi%2fwasi-sdk-writing-library-in-cpp-3%2f" target=_blank rel=noopener aria-label title="Share on tumblr"><div class="resp-sharing-button resp-sharing-button--tumblr resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentcolor" stroke="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.563 24c-5.093.0-7.031-3.756-7.031-6.411V9.747H5.116V6.648c3.63-1.313 4.512-4.596 4.71-6.469C9.84.051 9.941.0 9.999.0h3.517v6.114h4.801v3.633h-4.82v7.47c.016 1.001.375 2.371 2.207 2.371h.09c.631-.02 1.486-.205 1.936-.419l1.156 3.425c-.436.636-2.4 1.374-4.156 1.404h-.178l.011.002z"/></svg></div></div></a><a class=resp-sharing-button__link href="mailto:?subject=Writing%20a%20Library%20in%20C%2b%2b%20and%20Using%20it%20in%20the%20Browser%20with%20the%20WASI%20SDK%20-%20Implementing%20library%20functions&body=https%3a%2f%2fercanakyuerek.de%2fposts%2fwasi%2fwasi-sdk-writing-library-in-cpp-3%2f" target=_self rel=noopener aria-label title="Share via email"><div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></div></div></a><a class=resp-sharing-button__link href="https://pinterest.com/pin/create/button/?url=https%3a%2f%2fercanakyuerek.de%2fposts%2fwasi%2fwasi-sdk-writing-library-in-cpp-3%2f&media=https%3a%2f%2fercanakyuerek.de%2fposts%2fwasi%2fwasi-sdk-writing-library-in-cpp-3%2f;description=Writing%20a%20Library%20in%20C%2b%2b%20and%20Using%20it%20in%20the%20Browser%20with%20the%20WASI%20SDK%20-%20Implementing%20library%20functions" target=_blank rel=noopener aria-label title="Share on pinterest"><div class="resp-sharing-button resp-sharing-button--pinterest resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentcolor" stroke="none"><path d="M12.017.0C5.396.0.029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.162-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024.0 1.518.769 1.518 1.688.0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128.0 3.768-2.245 3.768-5.487.0-2.861-2.063-4.869-5.008-4.869-3.41.0-5.409 2.562-5.409 5.199.0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.401.165-1.495-.69-2.433-2.878-2.433-4.646.0-3.776 2.748-7.252 7.92-7.252 4.158.0 7.392 2.967 7.392 6.923.0 4.135-2.607 7.462-6.233 7.462-1.214.0-2.354-.629-2.758-1.379l-.749 2.848c-.269 1.045-1.004 2.352-1.498 3.146 1.123.345 2.306.535 3.55.535 6.607.0 11.985-5.365 11.985-11.987C23.97 5.39 18.592.026 11.985.026L12.017.0z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fercanakyuerek.de%2fposts%2fwasi%2fwasi-sdk-writing-library-in-cpp-3%2f&title=Writing%20a%20Library%20in%20C%2b%2b%20and%20Using%20it%20in%20the%20Browser%20with%20the%20WASI%20SDK%20-%20Implementing%20library%20functions&summary=Writing%20a%20Library%20in%20C%2b%2b%20and%20Using%20it%20in%20the%20Browser%20with%20the%20WASI%20SDK%20-%20Implementing%20library%20functions&source=https%3a%2f%2fercanakyuerek.de%2fposts%2fwasi%2fwasi-sdk-writing-library-in-cpp-3%2f" target=_blank rel=noopener aria-label title="Share on linkedin"><div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></div></div></a><a class=resp-sharing-button__link href="https://reddit.com/submit/?url=https%3a%2f%2fercanakyuerek.de%2fposts%2fwasi%2fwasi-sdk-writing-library-in-cpp-3%2f&resubmit=true&title=Writing%20a%20Library%20in%20C%2b%2b%20and%20Using%20it%20in%20the%20Browser%20with%20the%20WASI%20SDK%20-%20Implementing%20library%20functions" target=_blank rel=noopener aria-label title="Share on reddit"><div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentcolor" stroke="none"><path d="M12 0A12 12 0 000 12a12 12 0 0012 12 12 12 0 0012-12A12 12 0 0012 0zm5.01 4.744c.688.0 1.25.561 1.25 1.249a1.25 1.25.0 01-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968.0 1.754.786 1.754 1.754.0.716-.435 1.333-1.01 1.614a3.111 3.111.0 01.042.52c0 2.694-3.13 4.87-7.004 4.87s-7.004-2.176-7.004-4.87c0-.183.015-.366.043-.534A1.748 1.748.0 014.028 12c0-.968.786-1.754 1.754-1.754.463.0.898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342.0 01.14-.197.35.35.0 01.238-.042l2.906.617a1.214 1.214.0 011.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687.0 1.248-.561 1.248-1.249S9.937 12 9.249 12zm5.5.0c-.687.0-1.248.561-1.248 1.25.0.687.561 1.248 1.249 1.248S16 13.937 16 13.249c0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327.0 00-.231.094.33.33.0 000 .463c.842.842 2.484.913 2.961.913s2.105-.056 2.961-.913a.361.361.0 00.029-.463.33.33.0 00-.464.0c-.547.533-1.684.73-2.512.73-.828.0-1.979-.196-2.512-.73a.326.326.0 00-.232-.095z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://www.xing.com/app/user?op=share;url=https%3a%2f%2fercanakyuerek.de%2fposts%2fwasi%2fwasi-sdk-writing-library-in-cpp-3%2f;title=Writing%20a%20Library%20in%20C%2b%2b%20and%20Using%20it%20in%20the%20Browser%20with%20the%20WASI%20SDK%20-%20Implementing%20library%20functions" target=_blank rel=noopener aria-label title="Share on xing"><div class="resp-sharing-button resp-sharing-button--xing resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentcolor" stroke="none"><path d="M18.188.0c-.517.0-.741.325-.927.66.0.0-7.455 13.224-7.702 13.657.015.024 4.919 9.023 4.919 9.023.17.308.436.66.967.66h3.454c.211.0.375-.078.463-.22.089-.151.089-.346-.009-.536l-4.879-8.916c-.004-.006-.004-.016.0-.022L22.139.756c.095-.191.097-.387.006-.535C22.056.078 21.894.0 21.686.0h-3.498zM3.648 4.74c-.211.0-.385.074-.473.216-.09.149-.078.339.02.531l2.34 4.05c.004.01.004.016.0.021L1.86 16.051c-.099.188-.093.381.0.529.085.142.239.234.45.234h3.461c.518.0.766-.348.945-.667l3.734-6.609-2.378-4.155c-.172-.315-.434-.659-.962-.659H3.648v.016z"/></svg></div></div></a><a class=resp-sharing-button__link href="whatsapp://send?text=Writing%20a%20Library%20in%20C%2b%2b%20and%20Using%20it%20in%20the%20Browser%20with%20the%20WASI%20SDK%20-%20Implementing%20library%20functions%20https%3a%2f%2fercanakyuerek.de%2fposts%2fwasi%2fwasi-sdk-writing-library-in-cpp-3%2f" target=_blank rel=noopener aria-label title="Share on whatsapp"><div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentcolor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198.0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479.0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87.0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86.0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64.0 5.122 1.03 6.988 2.898a9.825 9.825.0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815.0 0012.05.0C5.495.0.16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882.0 005.683 1.448h.005c6.554.0 11.89-5.335 11.893-11.893a11.821 11.821.0 00-3.48-8.413z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fercanakyuerek.de%2fposts%2fwasi%2fwasi-sdk-writing-library-in-cpp-3%2f&t=Writing%20a%20Library%20in%20C%2b%2b%20and%20Using%20it%20in%20the%20Browser%20with%20the%20WASI%20SDK%20-%20Implementing%20library%20functions" target=_blank rel=noopener aria-label title="Share on hacker news"><div class="resp-sharing-button resp-sharing-button--hackernews resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentcolor" stroke="none"><path d="M0 24V0h24v24H0zM6.951 5.896l4.112 7.708v5.064h1.583v-4.972l4.148-7.799h-1.749l-2.457 4.875c-.372.745-.688 1.434-.688 1.434s-.297-.708-.651-1.434L8.831 5.896h-1.88z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://telegram.me/share/url?text=Writing%20a%20Library%20in%20C%2b%2b%20and%20Using%20it%20in%20the%20Browser%20with%20the%20WASI%20SDK%20-%20Implementing%20library%20functions&url=https%3a%2f%2fercanakyuerek.de%2fposts%2fwasi%2fwasi-sdk-writing-library-in-cpp-3%2f" target=_blank rel=noopener aria-label title="Share on telegram"><div class="resp-sharing-button resp-sharing-button--telegram resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg></div></div></a></div><div class=pagination><div class=pagination__buttons><span class="button previous"><a href=https://ercanakyuerek.de/posts/wasi/wasi-sdk-writing-library-in-cpp-4/><span class=button__icon>←</span>
<span class=button__text>Writing a Library in C++ and Using it in the Browser with the WASI SDK - JavaScript module</span></a></span>
<span class="button next"><a href=https://ercanakyuerek.de/posts/wasi/wasi-sdk-writing-library-in-cpp-2/><span class=button__text>Writing a Library in C++ and Using it in the Browser with the WASI SDK - CMake and build scripts</span>
<span class=button__icon>→</span></a></span></div></div></main></div><footer class=footer></footer></div><script type=text/javascript src=/bundle.min.c90b8161416b87c69a8e02683b54ddd6edb90aea699648bf655e6cbc45b419b8e465d196e715772463dba35a6faf5decb2eb247480d38680484d54645b434570.js integrity="sha512-yQuBYUFrh8aajgJoO1Td1u25Cupplki/ZV5svEW0GbjkZdGW5xV3JGPbo1pvr13ssuskdIDThoBITVRkW0NFcA=="></script></body></html>